# 12. 2026 年代における AI ネイティブシステム設計

> **種類**: 先進的アーキテクチャと AI の哲学  
> **重点**: 旧来の CRUD や単一プロンプト思考を打破し、複合 AI システムとエージェント的ワークフローの核となる設計原則を示します。

---

## 序：AI ネイティブ開発へのパラダイムシフト

従来の前後端分離では部品化と API 組成が課題でした。AI 世代では、AI エージェントの「調度と監督」が設計者の主戦場となります。巨大な“メガプロンプト”にすがるのは、すべてのビジネスロジックを一つの壊れやすいスクリプトに押し込むもので、幻覚と耐障害性の欠如を招きます。以下に企業向け AI ネイティブアプリ開発のゴールデンルールを列挙します。

---

## 1. 「単体 LLM」から Compound AI システムへ

UC Berkeley の研究者は、フラッグシップモデルへの盲信を捨て、**Compound AI Systems** の構築を訴えています。

- **技術的比喩**：一つのメガプロンプトを完全に分解し、役割を限定した小さなモデル群に再構成。ベクトル検索・事実照合専任のモデル、文法・語調チェックのモデルなど、状態を隔離して単一責務原則を貫くことで、デバッグ性と拡張性が飛躍的に向上します。  
- **組織アナロジー**：大規模な捜査では一人の刑事には頼らず、捜査課・鑑識課・情報課が分業します。Compound AI もこの精神です。

---

## 2. Andrew Ng の四大 Agentic パターン

Moyin では、Andrew Ng が提唱する Agentic Workflows を基盤としています。

### A. 反省と自己修正（Reflection & Self-Correction）  
LLM に一発で完璧な結果を期待せず、厳しい評価ループを構築します。Agent A が結果を出した後、Agent B が厳格に検証し、合格しなければ再出力させます。この多段磨きにより、7B モデルでも GPT-4 程度の質を実現できます。

### B. ツール利用 / 関数呼び出し（Tool Use / Function Calling）  
AI を認知の高い「脳」に例えつつ、物理操作はできないと位置づけ、MCP 準拠の API や DB 接続を背面からアタッチ。AI が「どのタイミングでどの関数を呼ぶべきか」を判断できるようにします。

### C. 計画能力（Planning）  
長期推論による幻覚を防ぐため、実装の前に木構造化されたステップを生成させます。プロジェクトマネージャーがガントチャートを描くように、順序と依存を明示化して実装を制御します。

### D. マルチエージェント協調（Multi-agent Collaboration）  
単一モデルでは巨大プロジェクトを支えきれないため、「スーパーバイザー/ルーター」を核とした木構造トポロジーを設計。総監がユーザー要求を受けて「コピーライター」「コンプライアンス」「ビジュアル」等の並列エージェントに振り分け、最終的に結果を統合します。

---

## 3. 次世代開発：プロンプト錬金を捨て、確率制御とルーティングへ

もはや表現の微調整ではなく**確率的エンジニアリング**と**AI ルータ**を導入します。

- エントリポイントに軽量なルーティングモデルを配置。  
- 簡易な問い（「接続を確認してください」）はローカルの 8B モデルへ。  
- 複雑な命令は Claude 3.5 Sonnet のようなクラウドフラッグシップへ。  
この動的ルーティングでコストと品質を両立させます。

---

## ✅ 2026 年 AI ネイティブアーキテクト検収基準

下記のフィルターを通して Phillips の次機能を企画できるか自問してください。

- [ ] 「単一万能プロンプトではなく、機能単位に責務を分離した Compound AI システムを自然に組み立てます。」  
- [ ] 「四大エージェント原則を守り、Reflection チェックポイントなしで AI の出力を信用しません。」  
- [ ] 「複雑なロジックではスーパバイザー階層を立てて並列エージェントに任せ、単一ポイントの過負荷を防ぎます。」  
- [ ] 「if/else 制御のように AI ルートを設計し、コストと難易度に応じて最適な LLM ノードへ動的に振り分けます。」
