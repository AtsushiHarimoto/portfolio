# 07. Drama Production Workflow

## ğŸ­ æ¼«åŠ‡ç”Ÿç”¢å…¨æµç¨‹åœ–

æœ¬æµç¨‹åœ–å±•ç¤ºäº†å¾ã€Œå°èªªæ–‡æœ¬ã€åˆ°ã€Œæœ€çµ‚è¦–è¨Šæˆæœã€çš„ç«¯åˆ°ç«¯è‡ªå‹•åŒ–è·¯å¾‘ã€‚

```mermaid
graph TD
    A[å°èªªæ–‡æœ¬ / åŠ‡æœ¬] -->|LLM| B(Director Agent: åŠ‡æœ¬æ‹†è§£)
    B --> C{StoryPack ç”Ÿæˆ}

    subgraph "Drama Workshop (Visual Editor)"
        C --> D[DramaTimeline: æ™‚é–“è»¸åŒæ­¥]
        C --> E[DramaGraph: é‚è¼¯èˆ‡æ¢ä»¶è·³è½‰]
        D & E --> F[è¦–è¦ºèª¿æ•´èˆ‡ä¿®æ­£]
    end

    F --> G[MCP Server: ä»»å‹™èª¿åº¦]

    subgraph "Asset Factory (Backend Services)"
        G --> H[TTS Service: èªéŸ³ç”Ÿæˆ]
        G --> I[ComfyUI: åœ–åƒ/è¦–é »æ¸²æŸ“]
        I --> J[Wan 2.2 / SVI ç¯€é»]
    end

    H & J --> K(Filming Studio: è¦–é »åˆæˆ)
    K --> L[æœ€çµ‚ MP4/WebM ç”¢å‡º]

    style A fill:#f9f,stroke:#333,stroke-width:2px
    style L fill:#00ff00,stroke:#333,stroke-width:4px
    style B fill:#bbf,stroke:#333
    style G fill:#f96,stroke:#333
```

## ğŸ›  é—œéµæŠ€è¡“é»

1.  **Director Agent**: è² è²¬å°‡è‡ªç„¶èªè¨€è½‰åŒ–ç‚º `StoryPack` JSONã€‚
2.  **Drama Workshop**:
    - `DramaTimeline`: è™•ç†éŸ³æ•ˆã€èªéŸ³ã€é¡é ­çš„ç²¾ç¢ºåŒæ­¥ã€‚
    - `DramaGraphEditor`: åŸºæ–¼ VueFlowï¼Œå…è¨±ç·¨è¼¯éç·šæ€§åŠ‡æœ¬çµæ§‹ã€‚
3.  **Task Queue**:
    - **default queue**: è™•ç† TTS èˆ‡æ•¸æ“šè½‰æ›ï¼ˆCPU å¯†é›†å‹ï¼‰ã€‚
    - **gpu_queue**: å°ˆä¾› ComfyUI æ¸²æŸ“èˆ‡è¦–é »åˆæˆï¼ˆVRAM å¯†é›†å‹ï¼‰ã€‚
