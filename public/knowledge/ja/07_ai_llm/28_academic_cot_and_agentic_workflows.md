# 28. 讓機器慢下來思考：思維鏈 (CoT) 與 Agentic 工作流革命

> **類型**: 大型語言模型應用實戰與架構設計模式
> **重點**: 呼應「Taijin在硅谷」探討的實戰真經。AI 不是一按就給標準答案的販賣機。本章揭露今年矽谷最推崇的兩大派典：強迫大腦轉換為 System 2 (慢思) 的 **思維鏈 (Chain of Thought, CoT)**，以及讓 AI 自己當老闆、反覆修改工作的 **Agentic Workflows (智能體工作流)**。

---

## 前言：快思 (System 1) 的愚蠢失誤

心理學巨擘康納曼曾說，人類思考分兩種：System 1 (直覺反射) 與 System 2 (慢速深思)。
傳統的 GPT-3 或 ChatGPT，全都是標準的 System 1。
如果你問它一個複雜問題：「我有一顆蘋果，吃了一半，吐了兩顆籽，我還剩多少水果？」
它會因為「吃了一半、吐了兩顆」這幾個字串的機率太高，0.1 秒後直接瞎猜出一個荒謬的數字。因為 Auto-regressive 模型「不容許退後」，文字只會像覆水難收一樣一直往前吐，它沒有時間在腦海中打草稿！

---

## 1. 魔法咒語的奇蹟：思維鏈 (Chain of Thought, CoT)

2022 年，研究人員發現了一句價值連城的魔法提示詞 (Prompt)：**「Let's think step by step (讓我們一步一步來思考)。」**

就只加了這句話，GPT 突然變成了奧林匹亞數學天才。為什麼？

- **用輸出來換取「記憶體與打草稿的時間」**。
- 當你要求模型一步步來，它會在最終答案之前，被迫吐出諸如 _「1. 蘋果是一顆水果。2. 吃了一半代表剩一半實體。3. 籽不是水果肉...」_ 這樣的過程文字。
- 這些文字，被丟進 **KV Cache**，成為了它接下來繼續推演答案的階梯！這等同於強迫神經網路暫停它的 System 1 直覺，進入嚴謹的 **System 2 (邏輯演繹)**。

在現代的 OpenAI o1 模型中，這個過程甚至被隱藏並自動化了（內建的深思時間 Time-to-think），這是暴力提升模型邏輯推理能力的最廉價且最強手段。

---

## 2. 顛覆傳統的四柱神：Agentic Workflows (智能體工作流)

如果你要寫一本 5 萬字的小說。你對著 GPT 說：「幫我寫本小說。」它出來的東西絕對是不能看的狗屎。
AI 大神吳恩達 (Andrew Ng) 為此大力推廣了 **Agentic Workflows (智能體工作流)** 模式。不要把 AI 當成會吐文字的印表機，要把 AI 當作一個「會自我反思的專案小組」。

要達成 Agentic 境界，必須運用四大設計模式：

### 🪞 1. 反思與自我糾正 (Reflection)

你寫了一個迴圈：先讓 AI 寫出第一章。然後開啟 **第二個完全無關的 AI (審查員)**，命令它：「挑出剛才那篇文章的 10 個語句不通順的毛病。」
然後把這 10 個毛病丟給原來的 AI 要求重寫。這樣左手打右手來回三次，最終產出的文章水準能超越 99% 的人類作家。

### 🛠️ 2. 工具調用 (Tool Use)

如同我們在第 23 篇提到的 Generative UI 原理。AI 的數學不好，算不出 `3894 * 123`。
這時候你給它一把尺：你告訴 AI「如果你遇到算術，不要自己猜，請呼叫一個叫做 `python_calculator()` 的函數」。AI 學會了利用外部工具來彌補自身的盲點。它現在甚至能自己上網 (Web Search)、自己查本機資料庫 (RAG)。

### 🛣️ 3. 規劃 (Planning)

面對「幫我安排一趟去日本的 7 天自由行」這種宏大目標。
Agent 會先打草稿，把自己分裂成幾個任務：
`[步驟1: 上網搜尋景點] -> [步驟2: 呼叫 API 查機票] -> [步驟3: 加總經費]`。
如果中途發現機票太貴，它能像人類一樣**退回前一步重新規劃**。

### 🤝 4. 多智能體協作 (Multi-Agent Collaboration)

也就是未來 Moyin 的終極型態！
讓一個 AI 扮演「主程式設計師」，另一個 AI 扮演「資安稽核員」，再一個 AI 扮演「QA 測試員」。工程師寫完代碼，測試員 AI 自動接手運行單元測試，如果噴紅字報錯，測試員直接把 Error Log 砸在工程師 AI 臉上叫它修。
三個機器人互相大吵大鬧一晚上，隔天早上你起床時，一個帶有完美測試覆蓋率的神級軟體就已經建置完畢。這就是微軟 **AutoGen** 等框架目前正在席捲全球狂潮的劇本。

---

## 💡 Vibecoding 高階系統發包訣竅

在使喚 Claude 或是指令建構 Moyin 內部高度複雜的大模型營運腳本時：

> 🗣️ `「你在幫我打造這套針對 Moyin 文檔分析的後端模組時，我嚴厲禁止你使用一鏡到底的 LLM API 呼叫 (Zero-shot)！對於這種高深的需求，請導入吳恩達推薦的【Agentic Workflows (智能體工作流)】。請為我設計一組 Pipeline：第一層模型必須採用【Chain of Thought (CoT)】強制輸出推理過程；第二層必須安插一個【Reflection (自我反思)】的評論者 Agent，確保文章符合我們的 00_core_protocol 規範。並設定當發現資訊不足時，大腦能自主發起 【Tool Use (工具呼叫)】 來觸發本機的 grep_search 檢索！」`
