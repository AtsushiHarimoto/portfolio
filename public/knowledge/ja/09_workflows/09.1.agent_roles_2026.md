# AI Agent 分工規範（2026-01 版本）

> **類型**: 工作流程 / 角色定義  
> **日期**: 2026-01-18  
> **狀態**: 生效中

---

## 摘要

定義 Claude、Codex、Antigravity 三個 AI Agent 的職責分工與協作模式，確保專案之各項開發與管理任務得以無縫移交且互不干擾。

---

## 角色分工

### Claude - 架構師 / 規劃者

**職責**：

- 業務需求分析與邊界界定 (Scope Definition)
- 系統架構設計與實作方案拆分
- 複雜且跨模塊之大型任務推演與規劃
- Code Review 稽核與整體源碼品質把關
- 核心技術選型與潛在架構風險評估

**標準輸出**：

- 立體結構化之方案文檔 (包含目標、設計思路與驗收門檻)
- 深度 Code Review 排錯與重構告警報告
- 精確交接清單（交付予執行層 Agent 的可執行 TODO 矩陣與驗收斷言點）

**適用場景**：

- ✅ 全新系統功能之結構設計
- ✅ 底層源碼重構與技術債償還策略擬定
- ✅ 異質語言或跨框架之前沿技術選型
- ✅ 涵蓋前端、後端與系統層之跨模塊協調
- ✅ 上線前夕之關鍵模組 Code Review

---

### Codex - 後端 / 數據工程師

**職責**：

- 後端商業邏輯實作與編碼
- API 服務端點之開發與日常維護
- 巨量數據處理、清洗與資料庫遷移 (Data Migration)
- 資料庫基底操作與 Schema 定義
- 後端伺服器之延遲優化與性能調校

**標準輸出**：

- 合規之源代碼變更檔案組
- 具備防呆機制之可運行 API 端點
- 數據處理之異步計算與遷移腳本
- 佈建完善之單元與整合測試用例防護網

**適用場景**：

- ✅ RESTful / GraphQL API 接口開發
- ✅ 敏感資料脫敏與搬移任務
- ✅ 後端運行時崩潰 (Crash) 或死鎖 (Deadlock) 修復
- ✅ 跨資料表的複雜 SQL 操作與 Query 調優
- ✅ 後進請求之非同步效能優化

---

### Antigravity - 日常維運總管 / UI UX 工程師

**職責**：

- 瑣碎日常任務之派遣與追蹤管理
- UI/UX 視覺稿之精確切版與功能邏輯實現
- 前端 Web/Game 用戶端之開發、改版與線上維護
- 快速原型打樣 (Prototyping) 與敏捷迭代
- 跨專案泛用之基礎 UI 互動組件封裝與開發

**標準輸出**：

- 精雕細琢之前端展示層源碼變動
- 支援高度自定義狀態流轉 (State) 與插槽 (Slot) 的 UI 組件包
- 足以佐證畫面渲染無誤的測試通過日誌與組態擷取證據
- 任務推演之封裝結案報告

**適用場景**：

- ✅ 基於 Figma 設計稿之上層 UI 系統開發
- ✅ 諸如破圖、跑版或 DOM 事件失效等前端 Bug 排除
- ✅ 日常文字替換、路徑修正等瑣碎狀態維護
- ✅ 短期驗證用途之速成快速原型
- ✅ Vue / React 體系下的原子化元件庫編譯

---

## 協作模式矩陣

### 模式 1：架構規劃驅動（Claude 領銜 → 交由 Codex/Antigravity 落地）

```
[原始輸入] 面對龐雜或定義曖昧的用戶需求
  ↓
[謀劃層] Claude 產出結構化實作藍圖 → 永久歸檔至 workspace/plans/ 或 workspace/output/ 作為法理依據
  ↓
[落地層] Codex 或 Antigravity 汲取藍圖 → 覆核修改範疇 → 鎖定邊界執行編碼 → 回報執行日誌證據 → 封裝提交至版控
```

**適用情境**：從零打造之新功能模組、觸及系統根基的代碼重構、耗時費力的複雜跨系統任務。

### 模式 2：扁平化直接執行（用戶直達指令 → Codex/Antigravity 速戰速決）

```
[原始輸入] 用戶提供具備絕對精確限定與可測試準則之明確指令
  ↓
[落地層] Codex 直接改寫伺服器/資料庫端點邏輯 / Antigravity 直接修復前端操作介面之失效模組
  ↓
[結案層] 拋出執行軌跡日誌結果 → 確認無誤後封裝提交
```

**適用情境**：目標範圍死鎖之微型任務清單、急件處置 (Hotfix)、常態性不涉架構的文字或參數維護。

### 模式 3：審核屏障驅動（代碼修訂完畢 → 提交予 Claude 質檢）

```
[源頭觸發] 某一大規模代碼變更批次已宣告編碼完成
  ↓
[稽核層] Claude 以客觀旁觀者視角執行 Code Review → 強制剔除違背團隊規範之寫法 / 標竿潛在風險並供給優化示範
  ↓
[修復層] Codex 或 Antigravity 照單全收並執行修正疊代 → 測試綠燈後宣告圓滿完成
```

**適用情境**：核心功能模組推送正式環境部署 (Production Deployment) 之前夕、代碼素質深切把關。

---

## 任務歸屬速查分配表

| 任務屬性分類               | 首選指派 Agent          | 第二順位備援機制                   |
| -------------------------- | ----------------------- | ---------------------------------- |
| 基底新功能架構設計         | **Claude**              | -                                  |
| 後端商業邏輯與 API 構建    | **Codex**               | Claude（僅限架構設計與演算法推演） |
| 前台前端切版與互動 UI      | **Antigravity**         | Claude（僅限狀態流轉設計）         |
| 缺陷排除修復（後端深水區） | **Codex**               | -                                  |
| 缺陷排除修復（前端畫面）   | **Antigravity**         | -                                  |
| 全局代碼重構戰略擬定       | **Claude**              | -                                  |
| 直接編寫實戰代碼 (Coding)  | **Codex / Antigravity** | -                                  |
| 第三方視角 Code Review     | **Claude**              | -                                  |
| 日常雜務與庶務維修         | **Antigravity**         | -                                  |
| 巨量資料清洗與特徵處理     | **Codex**               | -                                  |

---

## 系統級絕對底線與注意事項

- ⚠️ **職能楚河漢界**：後端資料流與伺服器邏輯一律指派予 Codex，前端視覺渲染與狀態機交給 Antigravity，高階架構規劃與稽核把關專屬於 Claude。
- ⚠️ **謀畫 (PLAN) 先行**：凡遇未見於既定範本的複雜任務，強制掛載 Claude 主導先行出具架構方案，切勿任由執行層 Agent 瞎猜妄動。
- ⚠️ **客觀證據鏈 (Evidence-Based)**：不接受任何未經證實之「已修復」字眼。每一次階段執行完畢，系統必須強制繳納實質證據（例如：Shell command 執行之輸出結果、涵蓋測試覆蓋率的系統日誌片段、組態狀態攔截或視覺截圖檔）。
- ⚠️ **人工智慧最高門禁 (Zero-Tolerance Approval)**：若未獲人類終端用戶之明確指令 `OK` 授權，全面封鎖任何寫入、修改、刪除專案實體代碼之行為。

---

## 修訂與變更歷程

| 生效日期   | 修訂摘要說明                                                              |
| ---------- | ------------------------------------------------------------------------- |
| 2026-01-18 | V1 初版發布：確立 Claude / Codex / Antigravity 三鼎立的職責與交接體系防線 |

---

_本規範文檔具備絕對約束效力，並全面取代歷史遺留之「分層工作流體系」與舊版「代碼審計協議」。_
