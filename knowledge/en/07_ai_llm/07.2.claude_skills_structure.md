# 07.2. Claude Code Skills Directory Structure

> **Type**: Tool Tricks and AI Environment Setup
> **Date**: 2026-01-11 (Revised: 2026-02-01)
> **Focus**: Details the correct directory structure and YAML Frontmatter regulations for external expansion packages (Skills) for Claude Code and Antigravity, ensuring that the trigger mechanisms based on the `@` modifier mount normally.

---

## Prelude and Correction of Core Fallacies

In traditional understanding, developers very easily mistakenly assemble all skills and workflows into a single monolithic Markdown file (for example: creating `.claude/skills/workflows.md` and expecting to trigger global scripts with `@workflows`). This kind of **"Single-File Centralized"** design is utterly incorrect.

**The Correct Architectural Iron Rule**:
To truly support independent `@skill_name` triggers, every independent external skill must **come with its own dedicated physical directory**.

- **Antigravity (Main Development Platform, Standard SSOT)**: Please build all skill packages under `.agent/skills/`.
- **Claude Code**: Located at `.claude/skills/` (During daily development, you can execute the `/sync-skills` workflow to actively sync and overwrite the contents from the main vault shown above).

---

## Standard Directory Layout

Please refer to the standard directory layout configuration of skills like `handoff` and `new_issue` below:

```text
.agent/skills/          # (Antigravity Main Directory)
‚îú‚îÄ‚îÄ handoff/            # [Dedicated directory for individual skill]
‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md        # Required: The main documentation file of the skill
‚îÇ   ‚îî‚îÄ‚îÄ TEMPLATE.md     # Optional: Auxiliary templates or other context files
‚îÇ
‚îú‚îÄ‚îÄ new_issue/          # Corresponds to @new_issue trigger
‚îÇ   ‚îî‚îÄ‚îÄ SKILL.md
‚îÇ
‚îú‚îÄ‚îÄ inbox/              # Corresponds to @inbox trigger
‚îÇ   ‚îî‚îÄ‚îÄ SKILL.md
‚îÇ
‚îî‚îÄ‚îÄ dev/                # Corresponds to @dev trigger
    ‚îî‚îÄ‚îÄ SKILL.md
```

### Why Forcibly Push a Hierarchical Directory Design?

1. **Supporting Multi-file Coupling**: Many high-level skills (like the work handoff `handoff`) require accompanying configuration files or output templates in addition to the main script. Only a directory structure can maintain encapsulation integrity.
2. **Directory-Level Identification Mechanism**: Antigravity's underlying scanning engine directly traverses the **first-level subdirectories** under the `.agent/skills/` directory, treating the directory name as the registry key, and capturing the `SKILL.md` inside it to establish the cache.

---

## SKILL.md Internal Document Specification

Under every dedicated skill directory, the main file named `SKILL.md` must exist. Furthermore, the top of this file **absolutely must contain a YAML Frontmatter block**.

```markdown
---
name: new_issue
description: "Assists users in creating new ISSUE task tracking entities. Trigger: @new_issue"
---

# Create Brand New Task Issue (new_issue)

## Skill Purpose

This skill assists the AI agent in standardizing the generation of tracking files under `workspace/issues/`...

## Triggers and Mechanism

Enter in the dialog box:
`@new_issue`

## Expected Workflow

...
```

### Frontmatter Verification Checkpoints

- `name`: Must precisely match the naming of the outer directory (this will be registered as the trigger command).
- `description`: Must succinctly summarize the function in one or two sentences, **and the final segment must explicitly write out the trigger method** (e.g.: "Trigger: @xxx"). If it lacks the trigger hint characters, the underlying engine will discard its registration.

---

## Migration & Troubleshooting Guide

If your system still harbors legacy single-file structures, please follow the script logic below to migrate (using PowerShell as an example here):

### Cleaning Up Incorrect Single-File States

```powershell
# Forcibly destroy non-compliant monolithic files
Remove-Item ".claude/skills/workflows.md" -Force
```

### Rebuilding a Compliant Tree Hierarchy

```powershell
# Re-equip physical directories based on skill names
New-Item -Type Directory ".claude/skills/new_issue" -Force
New-Item -Type Directory ".claude/skills/inbox" -Force

# (Please continue to write individual SKILL.md files inside the newly created directories above)
```

### ‚ùå Common Error Analysis

- **Error 1: Multi-level Nested Burials**
  - [Incorrect Implementation] `.claude/skills/workflows/new_issue/SKILL.md`
  - [Solution] The scanning engine will not recurse deeper! Please strictly adhere to a flattened, single-tier subdirectory structure: `.claude/skills/new_issue/SKILL.md`.
- **Error 2: Missing YAML Blocks**
  - [Incorrect Implementation] Directly writing `# new_issue` at the very beginning of the file, ignoring the `---` demarcations.
  - [Solution] Files lacking the `name` key-value pair will be judged by the system as regular documentation and refused mounting. Please fill in the YAML Frontmatter immediately.

---

## Associated References and Extended Maintenance

- When modifications to the code inside the main vault `.agent/skills/` via IDE are completed, if you need to ensure the external pure-text instruction end (Claude Code) takes effect synchronously, please feel free to call the `/sync-skills` workflow script to complete hot-reloading at any time.

---

## üí° Vibecoding Instructions

When asking the AI agent to generate new skills or manage the directory:

> üó£Ô∏è `"When generating or modifying Claude Code Skills, strictly adhere to the [Standard Directory Layout]. Never dump all skill logic into a single monolithic markdown file! Create a dedicated folder for each skill under '.agent/skills/' and ensure there is an 'SKILL.md' file inside it. Most critically, always include the YAML Frontmatter at the top of 'SKILL.md' with the 'name' and 'description' keys, and explicitly mention the '@skill_name' trigger in the description!"`
